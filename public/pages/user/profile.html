<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Crowd Trust - Profile</title>
  <link rel="stylesheet" href="../../styles/style.css" />
</head>

<body class="profile-page">
  <main class="profile-container">
    <h1 id="hey-message">Welcome to Your Profile</h1>

    <!-- Navigation Tabs -->
    <nav class="profile-nav">
      <button class="nav-tab" data-tab="settings">Settings</button>
      <button class="nav-tab" data-tab="campaigns" style="display: none;">My Campaigns</button>
      <button class="nav-tab" data-tab="pledges" style="display: none;">My Pledges</button>
    </nav>

    <!-- Settings Section -->
    <section class="profile-tab" id="settings-tab">
      <section class="profile-section" id="user-details-section">
        <h2>User Details</h2>
        <div id="user-details">
          <p><strong>Name:</strong> <span id="user-name"></span></p>
          <p><strong>Email:</strong> <span id="user-email"></span></p>
          <p><strong>Role:</strong> <span id="user-role"></span></p>
        </div>
      </section>
      <!-- Email Section -->
      <section class="profile-section" id="email-section">
        <h2>Change Email</h2>
        <form id="email-form">
          <label for="new-email">New Email:</label>
          <input type="email" id="new-email" name="newEmail" required />
          <label for="current-password-email">Current Password:</label>
          <input type="password" id="current-password-email" name="currentPasswordEmail" required />
          <button type="submit">Update Email</button>
        </form>
        <p id="email-feedback" class="feedback"></p>
      </section>

      <!-- Password Section -->
      <section class="profile-section" id="password-section">
        <h2>Change Password</h2>
        <form id="password-form">
          <label for="current-password">Current Password:</label>
          <input type="password" id="current-password" name="currentPassword" required />

          <label for="new-password">New Password:</label>
          <input type="password" id="new-password" name="newPassword" required />

          <button type="submit">Update Password</button>
        </form>
        <p id="password-feedback" class="feedback"></p>
      </section>

      <!-- Delete Section -->
      <section class="profile-section" id="control-section">
        <h2>Delete My Account</h2>
        <p>
          Delete Your Account: This action is irreversible. If you delete your account, all your data will be
          permanently removed from our system.
        </p>
        <button class="btn btn--danger" id="delete-user">Delete</button>
      </section>
    </section>

    <!-- Campaigner Area -->
    <section class="profile-tab" id="campaigns-tab" style="display: none;">
      <h2>My Campaigns</h2>
      <div id="campaigns-list">
        <!-- Campaign cards injected dynamically -->
      </div>
    </section>

    <!-- Backer Area -->
    <section class="profile-tab" id="pledges-tab" style="display: none;">
      <h2>My Pledges</h2>
      <div id="pledges-list">
        <!-- Pledge cards injected dynamically -->
      </div>
    </section>
  </main>

  <!-- Update Campaign Dialog -->
  <dialog id="update-dialog" aria-modal="true" class="dialog dialog--update">
    <div class="dialog__modal">
      <div class="dialog__content">
        <div class="dialog__header">
          <h2 class="dialog__title">Update Campaign</h2>
          <button type="button" class="dialog__close" aria-label="Close dialog">&times;</button>
        </div>
        <form id="update-form" class="dialog__form">
          <input type="hidden" id="update-campaign-id" name="campaignId" />

          <!-- Campaign Title -->
          <div class="form-group">
            <label for="update-title" class="form-group__label">Title</label>
            <input type="text" id="update-title" name="title" class="form-group__input" required />
          </div>

          <!-- Description -->
          <div class="form-group">
            <label for="update-description" class="form-group__label">Description</label>
            <textarea id="update-description" name="description" class="form-group__textarea" required></textarea>
          </div>

          <!-- Campaign Image Preview and Upload -->
          <div class="form-group">
            <label for="update-image" class="form-group__label">Image</label>
            <input type="file" id="update-image" name="image" accept="image/*" class="form-group__file" />
            <img id="update-image-preview" src="" alt="Campaign image preview" class="form-group__image-preview" />
          </div>

          <!-- Goal -->
          <div class="form-group">
            <label for="update-goal" class="form-group__label">Goal ($)</label>
            <input type="number" id="update-goal" name="goal" class="form-group__input" required />
          </div>

          <!-- Raised -->
          <div class="form-group">
            <label for="update-raised" class="form-group__label">Raised ($)</label>
            <input type="number" id="update-raised" name="raised" class="form-group__input" required />
          </div>

          <!-- Deadline -->
          <div class="form-group">
            <label for="update-deadline" class="form-group__label">Deadline</label>
            <input type="date" id="update-deadline" name="deadline" class="form-group__input" required />
          </div>

          <!-- Category -->
          <div class="form-group">
            <label for="update-category" class="form-group__label">Category</label>
            <select id="update-category" name="category" class="form-group__select" required>
              <option value="health">Health</option>
              <option value="technology">Technology</option>
              <option value="education">Education</option>
              <option value="environment">Environment</option>
              <option value="arts">Arts</option>
              <option value="music">Music</option>
              <option value="film">Film & Video</option>
              <option value="games">Games</option>
              <option value="food">Food & Drink</option>
              <option value="fashion">Fashion</option>
              <option value="sports">Sports</option>
              <option value="nonprofit">Nonprofit</option>
              <option value="science">Science</option>
            </select>
          </div>

          <!-- Rewards -->
          <div class="form-group">
            <label class="form-group__label">Rewards</label>
            <div id="rewards-container" class="form-group__rewards">
              <!-- Dynamically insert reward inputs here -->
            </div>
            <button type="button" id="add-reward-btn" class="form-group__add-reward">+ Add Reward</button>
          </div>

          <div class="dialog__actions">
            <button type="button" class="btn btn--cancel"
              onclick="document.getElementById('update-dialog').close()">Cancel</button>
            <button type="submit" class="btn btn--submit">Post Update</button>
          </div>
        </form>
      </div>
    </div>
  </dialog>

  <script src="../../js/profile.js" type="module"></script>
</body>

</html>